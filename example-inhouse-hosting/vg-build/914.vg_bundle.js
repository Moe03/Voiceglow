"use strict";(self.webpackChunkcustom_vf_nextjs=self.webpackChunkcustom_vf_nextjs||[]).push([[914],{5914:(e,t,n)=>{n.r(t),n.d(t,{default:()=>h});var o=n(2167),i=n(2982),r=n(885),l=n(7294),a=n(7619),u=n(7828),d=n(8676),v=n(9690),c=n(3850),s=n(1873),g=n(3260),f=l.createElement;function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const h=function(e){var t,n,o,p,h,w,b,y,C,_,O,G,x,N,E,I,k,F,V,j=(0,d.useRuntime)(),P=j.runtime,T=j.setRuntime,Z=j.formattedTurnsValue,S=(j.handlePushMessage,j.hasLoaded),D=l.useState([]),M=(0,r.Z)(D,2),z=M[0],R=M[1],L=l.useState([]),q=(0,r.Z)(L,2),A=q[0],B=q[1],H=l.useState(!1),J=(0,r.Z)(H,2),K=J[0],Q=J[1],U=null===(t=Z[Z.length-1])||void 0===t||null===(t=t.messages)||void 0===t?void 0:t.filter((function(e){return"text"===e.type||"choice"===e.type&&(e.content||e.item)})).slice(0,2);return l.useEffect((function(){if(A.forEach((function(e){clearTimeout(e)})),Z.length&&!0===S){var e;if(U.length!==(null===(e=z.messages)||void 0===e?void 0:e.length))return U.forEach((function(e,t){if("text"===e.type||"choice"===e.type){var n,o,r=0;U.forEach((function(e,n){var o;t>n&&(r+=e.delay||(null===(o=P.variables)||void 0===o?void 0:o.messageDelayMS)||1e3)}));var l=P.showInstantly||"human"===e.from?0:(e.delay||(null===(n=P.variables)||void 0===n?void 0:n.messageDelayMS)||1e3)+r,a=z[z.length-1];if(!(null==a||null===(o=a.messages)||void 0===o?void 0:o.find((function(n,o){return n.from===e.from&&t===o})))){var u=setTimeout((function(){R((function(t){return[].concat((0,i.Z)(t),[e])}))}),l);B((function(e){return[].concat((0,i.Z)(e),[u])}))}}})),function(){A.forEach((function(e){clearTimeout(e)})),R([])};A.forEach((function(e){clearTimeout(e)})),R([])}else A.forEach((function(e){clearTimeout(e)})),R([]);return function(){A.forEach((function(e){clearTimeout(e)})),R([])}}),[Z,S]),l.useEffect((function(){2===(null==z?void 0:z.length)?T((function(e){return m(m({},e),{},{showInstantly:!0})})):T((function(e){return m(m({},e),{},{showInstantly:!1})}))}),[z]),!1!==K||!1!==P.blockProactive||0===(null==z?void 0:z.length)||e.chatOpen?"":f(l.Fragment,null,f(a.E.button,{onClick:function(){return e.setChatOpen(!0)},key:"dynamic_proactive_container",className:" vg-fixed vg-w-unit-72 vg-rounded-large vg-flex vg-flex-col vg-gap-unit-2 vg-proactive",initial:{opacity:0,bottom:80,right:"popup"===(null===(n=window)||void 0===n||null===(n=n.VG_CONFIG)||void 0===n?void 0:n.render)||"bottom-right"===(null===(o=window)||void 0===o||null===(o=o.VG_CONFIG)||void 0===o?void 0:o.render)?15:"unset",left:"bottom-left"===(null===(p=window)||void 0===p||null===(p=p.VG_CONFIG)||void 0===p?void 0:p.render)?15:"unset",height:"auto"},animate:{opacity:1,bottom:130,right:"popup"===(null===(h=window)||void 0===h||null===(h=h.VG_CONFIG)||void 0===h?void 0:h.render)||"bottom-right"===(null===(w=window)||void 0===w||null===(w=w.VG_CONFIG)||void 0===w?void 0:w.render)?38:"unset",left:"bottom-left"===(null===(b=window)||void 0===b||null===(b=b.VG_CONFIG)||void 0===b?void 0:b.render)?38:"unset",height:"auto"},exit:{opacity:0,bottom:80,right:"popup"===(null===(y=window)||void 0===y||null===(y=y.VG_CONFIG)||void 0===y?void 0:y.render)||"bottom-right"===(null===(C=window)||void 0===C||null===(C=C.VG_CONFIG)||void 0===C?void 0:C.render)?30:"unset",left:"bottom-left"===(null===(_=window)||void 0===_||null===(_=_.VG_CONFIG)||void 0===_?void 0:_.render)?30:"unset",height:"auto"},layout:!0},f(c.Z,{onPress:function(){Q(!0),T((function(e){return m(m({},e),{},{blockProactive:!0})}))},className:" vg-place-self-end vg-bg-background/50 vg-text-foreground vg-hover:bg-background/75 vg-proactive-btn--close",variant:"light",size:"sm",isIconOnly:!0,color:"default"},f(s.u5Z,{className:" vg-w-unit-3 vg-h-unit-3 vg-proactive-close--icon"})),f(u.M,null,0!==(null==z?void 0:z.length)&&z.map((function(t,n){return f(a.E.div,{transition:{duration:.5},layout:!0,className:" vg-text-[14px] vg-flex vg-flex-col vg-float-right vg-w-full vg-proactive-message",key:"chat_proactive_messaage_".concat(n)},"text"===t.type&&f(g.Z,{isShort:!0,className:" vg-text-left vg-bg-content2 vg-rounded-tl-[25px] vg-rounded-bl-[25px] vg-rounded-tr-[25px] vg-rounded-br-[5px] vg-place-self-end vg-p-unit-5 vg-w-full vg-proactive-message--text",key:"text_view__proactive_0_".concat(n),item:t,text:t.item.payload.message,rawItem:t.rawItem}),("buttons"===t.type||"choice"===t.type)&&f(v.Z,{isCarousel:!0,messageTurnIndex:999,size:"sm",item:t.item||t.content,index:n,setChatOpen:e.setChatOpen,className:" vg-tw-ltr vg-proactive-message--btn",containerClassname:" vg-proactive-message-btn-container"}))})))),z.length!==(null==U?void 0:U.length)&&0!==(null==U?void 0:U.length)&&f(a.E.div,{key:"little_proactive_loading",className:" vg-fixed vg-w-unit-8 vg-h-auto vg-z-[10000] vg-bg-content2 vg-flex vg-justify-center vg-rounded-large vg-overflow-hidden vg-proactive-loading-container",initial:{opacity:0,bottom:25,right:"popup"===(null===(O=window.VG_CONFIG)||void 0===O?void 0:O.render)||"bottom-right"===(null===(G=window.VG_CONFIG)||void 0===G?void 0:G.render)?30:"unset",left:"bottom-left"===(null===(x=window.VG_CONFIG)||void 0===x?void 0:x.render)?30:"unset"},animate:{opacity:1,bottom:45,right:"popup"===(null===(N=window.VG_CONFIG)||void 0===N?void 0:N.render)||"bottom-right"===(null===(E=window.VG_CONFIG)||void 0===E?void 0:E.render)?30:"unset",left:"bottom-left"===(null===(I=window.VG_CONFIG)||void 0===I?void 0:I.render)?30:"unset"},exit:{opacity:0,bottom:25,right:"popup"===(null===(k=window.VG_CONFIG)||void 0===k?void 0:k.render)||"bottom-right"===(null===(F=window.VG_CONFIG)||void 0===F?void 0:F.render)?30:"unset",left:"bottom-left"===(null===(V=window.VG_CONFIG)||void 0===V?void 0:V.render)?30:"unset"}},f(u.M,null,f(a.E.div,{initial:{scale:1},animate:{scale:1.1},exit:{scale:1},transition:{repeat:1/0,repeatType:"mirror",duration:1},key:"dots_container",className:" vg-h-unit-4 vg-flex vg-gap-[3px] vg-items-center vg-border-none vg-justify-center vg-rounded-lg vg-w-full ".concat(" vg-bg-transparent "," vg- vg-proactive-loading ")},f(a.E.div,{key:"1_dots_circle",animate:{y:[-1,0,1,0,-1],backgroundColor:["#C8C8C8","#E3E3E3","#C8C8C8"]},transition:{repeat:1/0,repeatType:"reverse",duration:.8},className:" vg-w-unit-1 vg-h-unit-1 vg-rounded-full vg-proactive-loading--dot"}),f(a.E.div,{key:"2_dots_circle",animate:{y:[1,0,-1,0,1],backgroundColor:["#C8C8C8","#E3E3E3","#C8C8C8"]},transition:{repeat:1/0,repeatType:"mirror",delay:.2,duration:.8},className:" vg-w-unit-1 vg-h-unit-1 vg-rounded-full vg-proactive-loading--dot"}),f(a.E.div,{key:"3_dots_circle",animate:{y:[-1,0,1,0,-1],backgroundColor:["#C8C8C8","#E3E3E3","#C8C8C8"]},transition:{repeat:1/0,repeatType:"mirror",delay:.4,duration:.8},className:" vg-w-unit-1 vg-h-unit-1 vg-rounded-full vg-proactive-loading--dot"})))))}}}]);